
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Python 包装的概述 &#8212; Python Packaging User Guide</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/pypa.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/tabs.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/translations.js"></script>
    
    <script src="_static/sidebar.js"></script>
    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="The Packaging Flow" href="flow.html" />
    <link rel="prev" title="Python 包装用户指南" href="index.html" /><link rel="shortcut icon" type="image/png" href="_static/py.svg" />
            <script type="text/javascript" src="_static/copybutton.js"></script>
            <script type="text/javascript" src="_static/menu.js"></script> 
  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://pypa.io" class="nav-logo">
             <img src="_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="快速搜索"/>
            <input type="submit" value="转向"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
<h3><a href="index.html">目录</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python 包装的概述</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#thinking-about-deployment">关于部署的思考</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packaging-python-libraries-and-tools">包装 Python 库和工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packaging-python-applications">包装 Python 应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-about">那么 ……</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wrap-up">总结一下吧</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="flow.html">The Packaging Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="guides/index.html">指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="discussions/index.html">讨论</a></li>
<li class="toctree-l1"><a class="reference internal" href="specifications/index.html">PyPA specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_projects.html">项目摘要</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">术语表</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">如何获得支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">为本指南做出贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html">新闻</a></li>
</ul>

  <div>
    <h4>上一个主题</h4>
    <p class="topless"><a href="index.html"
                          title="上一章">Python 包装用户指南</a></p>
  </div>
  <div>
    <h4>下一个主题</h4>
    <p class="topless"><a href="flow.html"
                          title="下一章">The Packaging Flow</a></p>
  </div>
        </nav>
    </div>
</div>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="flow.html" title="The Packaging Flow"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="index.html" title="Python 包装用户指南"
             accesskey="P">上一页</a> |</li>
          <li><img src="_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://pypa.io">PyPA</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
              <a href="index.html">Python Packaging User Guide</a> &#187;
              
          </li>
        <li class="nav-item nav-item-this"><a href="">Python 包装的概述</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="text" name="q" />
          <input type="submit" value="转向" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="an-overview-of-packaging-for-python">
<h1>Python 包装的概述<a class="headerlink" href="#an-overview-of-packaging-for-python" title="永久链接至标题">¶</a></h1>
<p>作为一种通用的编程语言，Python 被设计成可以在许多方面使用。你可以建立网站或工业机器人，或为你的朋友设计一个游戏，以及更多，都使用相同的核心技术。</p>
<p>Python 的灵活性是为什么每个 Python 项目的第一步都必须考虑项目的受众和项目运行的相应环境。在写代码之前考虑打包问题可能看起来很奇怪，但这个过程对于避免未来的头痛问题有很大的作用。</p>
<p>这个概述提供了一个通用的决策树，用于推理 Python 的大量封装选项。继续阅读，为你的下一个项目选择最好的技术。</p>
<div class="contents local topic" id="contents">
<p class="topic-title">导航</p>
<ul class="simple">
<li><p><a class="reference internal" href="#thinking-about-deployment" id="id4">关于部署的思考</a></p></li>
<li><p><a class="reference internal" href="#packaging-python-libraries-and-tools" id="id5">包装 Python 库和工具</a></p>
<ul>
<li><p><a class="reference internal" href="#python-modules" id="id6">Python 模块</a></p></li>
<li><p><a class="reference internal" href="#python-source-distributions" id="id7">Python 源码分发</a></p></li>
<li><p><a class="reference internal" href="#python-binary-distributions" id="id8">Python 的二进制分发</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#packaging-python-applications" id="id9">包装 Python 应用程序</a></p>
<ul>
<li><p><a class="reference internal" href="#depending-on-a-framework" id="id10">取决于框架</a></p>
<ul>
<li><p><a class="reference internal" href="#service-platforms" id="id11">服务平台</a></p></li>
<li><p><a class="reference internal" href="#web-browsers-and-mobile-applications" id="id12">网络浏览器和移动应用程序</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#depending-on-a-pre-installed-python" id="id13">取决于预装的 Python</a></p></li>
<li><p><a class="reference internal" href="#depending-on-a-separate-software-distribution-ecosystem" id="id14">依赖于独立的软件分发生态系统</a></p></li>
<li><p><a class="reference internal" href="#bringing-your-own-python-executable" id="id15">带来你自己的 Python 可执行文件</a></p></li>
<li><p><a class="reference internal" href="#bringing-your-own-userspace" id="id16">携带自己的用户空间</a></p></li>
<li><p><a class="reference internal" href="#bringing-your-own-kernel" id="id17">自带内核</a></p></li>
<li><p><a class="reference internal" href="#bringing-your-own-hardware" id="id18">自带硬件</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-about" id="id19">那么 ……</a></p>
<ul>
<li><p><a class="reference internal" href="#operating-system-packages" id="id20">操作系统包</a></p></li>
<li><p><a class="reference internal" href="#virtualenv" id="id21">virtualenv</a></p></li>
<li><p><a class="reference internal" href="#security" id="id22">安全性</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#wrap-up" id="id23">总结一下吧</a></p></li>
</ul>
</div>
<section id="thinking-about-deployment">
<h2><a class="toc-backref" href="#id4">关于部署的思考</a><a class="headerlink" href="#thinking-about-deployment" title="永久链接至标题">¶</a></h2>
<p>软件包的存在是为了安装（或 <em>部署</em>），所以在你打包任何东西之前，你要对下面的部署问题有一些答案：</p>
<ul class="simple">
<li><p>谁是你的软件的用户？你的软件是否会被其他从事软件开发的开发人员、数据中心的操作人员或不太懂软件的群体安装？</p></li>
<li><p>你的软件是要在服务器、桌面、移动客户端（手机、平板电脑等）上运行，还是嵌入到专用设备中？</p></li>
<li><p>你的软件是单独安装，还是成批部署？</p></li>
</ul>
<p>打包是关于目标环境和部署经验。上面的问题有很多答案，每种情况的组合都有自己的解决方案。有了这些信息，下面的概述将指导你选择最适合你的项目的打包技术。</p>
</section>
<section id="packaging-python-libraries-and-tools">
<h2><a class="toc-backref" href="#id5">包装 Python 库和工具</a><a class="headerlink" href="#packaging-python-libraries-and-tools" title="永久链接至标题">¶</a></h2>
<p>你可能听说过 PyPI、<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> 和 <code class="docutils literal notranslate"><span class="pre">wheel</span></code> 文件。这些只是 Python 生态系统提供的向开发者分发 Python 代码的少数工具，你可以在 <a class="reference internal" href="guides/distributing-packages-using-setuptools.html"><span class="doc">Packaging and distributing projects</span></a> 中阅读。</p>
<p>以下的打包方法是针对开发环境中的技术受众所使用的库和工具。如果你正在寻找为非技术用户和/或生产环境打包 Python 的方法，请跳到 <a class="reference internal" href="#packaging-applications"><span class="std std-ref">包装 Python 应用程序</span></a>。</p>
<section id="python-modules">
<h3><a class="toc-backref" href="#id6">Python 模块</a><a class="headerlink" href="#python-modules" title="永久链接至标题">¶</a></h3>
<p>一个 Python 文件，只要它只依赖于标准库，就可以被重新分发和重复使用。你还需要确保它是为正确的 Python 版本编写的，并且只依赖于标准库。</p>
<p>这非常适合在拥有兼容 Python 版本的人之间分享简单的脚本和片段（比如通过电子邮件、StackOverflow 或 GitHub gists）。甚至有一些完整的 Python 库提供了这个选项，如 <a class="reference external" href="https://bottlepy.org/docs/dev/">bottle.py</a> 和 <a class="reference external" href="https://boltons.readthedocs.io/en/latest/architecture.html" title="(在 boltons v21.0)"><span class="xref std std-doc">boltons</span></a>。</p>
<p>然而，对于由多个文件组成的项目，需要额外的库，或者需要特定版本的 Python，这种模式就无法扩展，因此有了下面的选项。</p>
</section>
<section id="python-source-distributions">
<h3><a class="toc-backref" href="#id7">Python 源码分发</a><a class="headerlink" href="#python-source-distributions" title="永久链接至标题">¶</a></h3>
<p>如果你的代码由多个 Python 文件组成，它通常被组织成一个目录结构。任何包含 Python 文件的目录都可以构成一个 <a class="reference internal" href="glossary.html#term-Import-Package"><span class="xref std std-term">Import Package</span></a></p>
<p>由于包由多个文件组成，它们更难分发。大多数协议一次只支持传输一个文件（你上次点击一个链接而下载多个文件是什么时候？） 更容易出现不完整的传输，也更难保证目的地的代码完整性”。</p>
<p>只要你的代码只包含纯 Python 代码，而且你知道你的部署环境支持你的 Python 版本，那么你就可以使用 Python 的本地打包工具来创建一个 <em>source</em> <a class="reference internal" href="glossary.html#term-Distribution-Package"><span class="xref std std-term">Distribution Package</span></a>，或者简称 <em>sdist</em>。</p>
<p>Python 的 <em>sdists</em> 是包含一个或多个软件包或模块的压缩档案（<code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code> 文件）。如果你的代码是纯 Python 的，而且你只依赖其他 Python 包，你可以 <a class="reference external" href="https://docs.python.org/3/distutils/sourcedist.html" title="(在 Python v3.11)"><span class="xref std std-doc">到这里了解更多</span></a>。</p>
<p>如果你依赖任何非 Python 代码，或者非 Python 包（比如 <a class="reference external" href="https://en.wikipedia.org/wiki/Libxml2">libxml2</a> 在 <a class="reference external" href="https://pypi.org/project/lxml/">lxml</a> 的情况下，或者 BLAS 库在 <a class="reference external" href="https://pypi.org/project/numpy">numpy</a> 的情况下），你将需要使用下一节详述的格式，这对纯 Python 库也有很多好处。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Python 和 PyPI 支持多个发行版提供同一软件包的不同实现。例如，未被维护但具有象征意义的 <a class="reference external" href="https://pypi.org/project/PIL/">PIL 发行版</a> 提供了 PIL 包，而 <a class="reference external" href="https://pypi.org/project/Pillow/">Pillow</a> 也是如此，它是 PIL 的一个积极维护的分叉！</p>
<p>这种 Python 打包的超级能力使 Pillow 有可能成为 PIL 的替代品，只需改变你项目的 <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> 或 <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> 即可。</p>
</div>
</section>
<section id="python-binary-distributions">
<h3><a class="toc-backref" href="#id8">Python 的二进制分发</a><a class="headerlink" href="#python-binary-distributions" title="永久链接至标题">¶</a></h3>
<p>Python 的大部分实用能力来自于它与软件生态系统整合的能力，特别是用 C、C++、Fortran、Rust 和其他语言编写的库。</p>
<p>并不是所有的开发者都有合适的工具或经验来构建这些用这些编译语言编写的组件，所以 Python 创建了 <a class="reference internal" href="glossary.html#term-Wheel"><span class="xref std std-term">Wheel</span></a>，这是一种包格式，旨在用编译的工件来运送库。事实上，Python 的包安装程序 <code class="docutils literal notranslate"><span class="pre">pip</span></code> 总是更喜欢轮子，因为安装总是更快，所以即使是纯 Python 包也能用轮子更好地工作。</p>
<p>二进制发行版最好是与源代码发行版相匹配。即使你不为每个操作系统上传你的代码轮子，通过上传 sdist，你也可以让其他平台的用户为自己构建它。除非你为一个非常特殊的使用情况创建工件，而你知道接收者只需要其中一个，否则默认为同时发布 sdist 和轮子档案。</p>
<p>Python 和 PyPI 让我们很容易同时上传 wheel 和 sdists。只要按照 <a class="reference internal" href="tutorials/packaging-projects.html"><span class="doc">包装 Python 项目</span></a> 的教程就可以了。</p>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="_images/py_pkg_tools_and_libs.png"><img alt="A summary of Python's packaging capabilities for tools and libraries." src="_images/py_pkg_tools_and_libs.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Python 推荐的内置库和工具打包技术。摘自 <a class="reference external" href="https://www.youtube.com/watch?v=iLVNWfPWAC8">包装梯度（2017）</a>。</span><a class="headerlink" href="#id2" title="永久链接至图片">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="packaging-python-applications">
<span id="packaging-applications"></span><h2><a class="toc-backref" href="#id9">包装 Python 应用程序</a><a class="headerlink" href="#packaging-python-applications" title="永久链接至标题">¶</a></h2>
<p>到目前为止，我们只讨论了 Python 的本地发布工具。根据我们的介绍，你可以正确地推断出这些内置的方法只针对有 Python 的环境，以及知道如何安装 Python 包的受众。</p>
<p>由于有各种各样的操作系统、配置和人，这种假设只有在针对开发者受众时才是安全的。</p>
<p>Python 的原生包装主要是为在开发者之间分发可重用的代码而建立的，称为库。你可以把 <strong>工具</strong>，或开发人员的基本应用，放在 Python 的库包装之上，使用像 <a class="reference external" href="https://setuptools.pypa.io/en/latest/userguide/entry_point.html" title="(在 setuptools v67.0.0.post20230128)"><span class="xref std std-doc">setuptools entry_points</span></a> 这样的技术。</p>
<p>库是构建模块，而不是完整的应用程序。对于分发应用程序，有一个全新的技术世界。</p>
<p>接下来的几节将根据这些应用打包选项对目标环境的依赖性来组织它们，这样你就可以为你的项目选择合适的选项。</p>
<section id="depending-on-a-framework">
<h3><a class="toc-backref" href="#id10">取决于框架</a><a class="headerlink" href="#depending-on-a-framework" title="永久链接至标题">¶</a></h3>
<p>某些类型的Python应用程序，如网站后端和其他网络服务，已经足够普遍，以至于它们有框架来实现其开发和打包。其他类型的应用程序，如动态 Web 前端和移动客户端，足够复杂，以至于框架变得不仅仅是一种便利。</p>
<p>在所有这些情况下，从框架的打包和部署故事出发，向后工作是有意义的。一些框架包括一个部署系统，它包裹了本指南其余部分所概述的技术。在这些情况下，你会想听从你的框架的打包指南，以获得最简单和最可靠的生产经验。</p>
<p>如果你曾经想知道这些平台和框架在后台是如何工作的，你可以随时阅读后面的章节。</p>
<section id="service-platforms">
<h4><a class="toc-backref" href="#id11">服务平台</a><a class="headerlink" href="#service-platforms" title="永久链接至标题">¶</a></h4>
<p>如果你正在为 Heroku 或 Google App Engine 这样的 “平台即服务” 或 “PaaS” 进行开发，你将会想要遵循它们各自的打包指南。</p>
<ul class="simple">
<li><p><a class="reference external" href="https://devcenter.heroku.com/articles/getting-started-with-python">Heroku</a></p></li>
<li><p><a class="reference external" href="https://cloud.google.com/appengine/docs/python/">Google App Engine</a></p></li>
<li><p><a class="reference external" href="https://www.pythonanywhere.com/">PythonAnywhere</a></p></li>
<li><p><a class="reference external" href="https://blog.openshift.com/getting-started-python/">OpenShift</a></p></li>
<li><p>“Serverless” frameworks like <a class="reference external" href="https://github.com/zappa/Zappa">Zappa</a></p></li>
</ul>
<p>在所有这些设置中，平台负责包装和部署，只要你遵循他们的模式。大多数软件并不适合这些模板之一，因此存在以下所有其他选项”</p>
<p>如果你正在开发的软件将被部署到你自己的机器上，用户的个人电脑上，或任何其他安排，请继续阅读。</p>
</section>
<section id="web-browsers-and-mobile-applications">
<h4><a class="toc-backref" href="#id12">网络浏览器和移动应用程序</a><a class="headerlink" href="#web-browsers-and-mobile-applications" title="永久链接至标题">¶</a></h4>
<p>Python 的稳步发展正引领它进入新的空间。如今，你可以用 Python 编写一个移动应用或网络应用前端。虽然语言可能是熟悉的，但打包和部署的做法是全新的”</p>
<p>如果你打算向这些新领域发布，你会想看看以下框架，并参考它们的包装指南：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://kivy.org/">Kivy</a></p></li>
<li><p><a class="reference external" href="https://pybee.org/">Beeware</a></p></li>
<li><p><a class="reference external" href="https://brython.info/">Brython</a></p></li>
<li><p><a class="reference external" href="https://flexx.readthedocs.io/en/latest/">Flexx</a></p></li>
</ul>
<p>如果你对使用框架或平台不感兴趣，或者只是想知道上述框架所利用的一些技术和技巧，请继续阅读下文。</p>
</section>
</section>
<section id="depending-on-a-pre-installed-python">
<h3><a class="toc-backref" href="#id13">取决于预装的 Python</a><a class="headerlink" href="#depending-on-a-pre-installed-python" title="永久链接至标题">¶</a></h3>
<p>挑选一台任意的计算机，根据环境，很有可能已经安装了 Python。多年来，大多数 Linux 和 Mac 操作系统都默认包含了 Python，你可以合理地依赖 Python 预先存在于你的数据中心或开发者和数据科学家的个人机器上。</p>
<p>支持这种模式的技术：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/pantsbuild/pex#user-content-pex">PEX</a> (Python EXecutable)</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/zipapp.html" title="(在 Python v3.11)"><span class="xref std std-doc">zipapp</span></a> (does not help manage dependencies, requires Python 3.5+)</p></li>
<li><p><a class="reference external" href="https://github.com/linkedin/shiv#user-content-shiv">shiv</a> (requires Python 3)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>在这里的所有方法中，依靠预装的 Python 对目标环境的依赖性最大。当然，这也使得软件包最小，小到个位数的兆字节，甚至是千字节。</p>
<p>一般来说，减少对目标系统的依赖会增加我们包的大小，所以这里的解决方案大致上是按照输出大小的增加来排列的。</p>
</div>
</section>
<section id="depending-on-a-separate-software-distribution-ecosystem">
<span id="depending-on-a-separate-ecosystem"></span><h3><a class="toc-backref" href="#id14">依赖于独立的软件分发生态系统</a><a class="headerlink" href="#depending-on-a-separate-software-distribution-ecosystem" title="永久链接至标题">¶</a></h3>
<p>很长一段时间以来，许多操作系统，包括 Mac 和 Windows，都缺乏内置的软件包管理。直到最近，这些操作系统才获得了所谓的 “应用商店”，但即使是那些专注于消费者的应用，也没有为开发者提供什么。</p>
<p>开发者长期以来一直在寻求补救措施，在这场斗争中，出现了自己的软件包管理解决方案，如 <a class="reference external" href="https://brew.sh/">Homebrew</a>。对于 Python 开发者来说，最相关的替代方案是一个名为 <a class="reference external" href="https://en.wikipedia.org/wiki/Anaconda_(Python_distribution)">Anaconda</a> 的软件包生态系统。Anaconda 是围绕 Python 建立的，在学术、分析和其他面向数据的环境中越来越普遍，甚至可以 <a class="reference external" href="https://web.archive.org/web/20190403064038/https://www.paypal-engineering.com/2016/09/07/python-packaging-at-paypal/">进入面向服务器的环境</a>。</p>
<p>关于为 Anaconda 生态系统建立和发布的说明：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://conda.io/projects/conda-build/en/latest/user-guide/tutorials/index.html">用 conda 构建库和应用程序</a></p></li>
<li><p><a class="reference external" href="https://conda.io/projects/conda-build/en/latest/user-guide/tutorials/build-pkgs-skeleton.html">将一个本地 Python 包过渡到 Anaconda</a></p></li>
</ul>
<p>类似的模式包括安装另一个 Python 发行版，但不支持任意的操作系统级软件包：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.activestate.com/products/python/">ActiveState ActivePython</a></p></li>
<li><p><a class="reference external" href="http://winpython.github.io/">WinPython</a></p></li>
</ul>
</section>
<section id="bringing-your-own-python-executable">
<span id="bringing-your-own-python"></span><h3><a class="toc-backref" href="#id15">带来你自己的 Python 可执行文件</a><a class="headerlink" href="#bringing-your-own-python-executable" title="永久链接至标题">¶</a></h3>
<p>我们所知道的计算是由执行程序的能力来定义的。每个操作系统都原生支持一种或多种他们可以原生执行的程序格式。</p>
<p>有许多技术和工艺可以把你的 Python 程序变成这些格式之一，其中大多数涉及到把 Python 解释器和任何其他依赖性嵌入到一个可执行文件中。</p>
<p>这种被称为 <em>冻结</em> 的方法提供了广泛的兼容性和无缝的用户体验，尽管通常需要多种技术，以及相当多的努力。</p>
<p>Python 冻结的选择：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pyinstaller.readthedocs.io/en/stable/">pyInstaller</a> - Cross-platform</p></li>
<li><p><a class="reference external" href="https://marcelotduarte.github.io/cx_Freeze/">cx_Freeze</a> - Cross-platform</p></li>
<li><p><a class="reference external" href="https://github.com/conda/constructor">constructor</a> - For command-line installers</p></li>
<li><p><a class="reference external" href="http://www.py2exe.org/">py2exe</a> - Windows only</p></li>
<li><p><a class="reference external" href="https://py2app.readthedocs.io/en/latest/">py2app</a> - Mac only</p></li>
<li><p><a class="reference external" href="https://github.com/jamesabel/osnap">osnap</a> - Windows and Mac</p></li>
<li><p><a class="reference external" href="https://pypi.org/project/pynsist/">pynsist</a> - Windows only</p></li>
</ul>
<p>上述大部分内容都意味着单用户部署。对于多组件的服务器应用程序，请参阅 <a class="reference external" href="https://github.com/chef/omnibus#user-content--omnibus">Chef Omnibus</a>。</p>
</section>
<section id="bringing-your-own-userspace">
<h3><a class="toc-backref" href="#id16">携带自己的用户空间</a><a class="headerlink" href="#bringing-your-own-userspace" title="永久链接至标题">¶</a></h3>
<p>越来越多的操作系统 – 包括 Linux、Mac OS 和 Windows – 可以被设置为运行打包成轻量级镜像的应用程序，使用一种相对现代的安排，通常被称为 <a class="reference external" href="https://en.wikipedia.org/wiki/Operating-system-level_virtualization">操作系统级虚拟化</a>，或 <em>容器化</em>。</p>
<p>这些技术大多与 Python 无关，因为它们打包整个操作系统文件系统，而不仅仅是 Python 或 Python 包。</p>
<p>在 Linux 服务器中的采用最为广泛，那里是技术的发源地，也是下面这些技术效果最好的地方：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://appimage.org/">AppImage</a></p></li>
<li><p><a class="reference external" href="https://www.fullstackpython.com/docker.html">Docker</a></p></li>
<li><p><a class="reference external" href="https://flatpak.org/">Flatpak</a></p></li>
<li><p><a class="reference external" href="https://snapcraft.io/">Snapcraft</a></p></li>
</ul>
</section>
<section id="bringing-your-own-kernel">
<h3><a class="toc-backref" href="#id17">自带内核</a><a class="headerlink" href="#bringing-your-own-kernel" title="永久链接至标题">¶</a></h3>
<p>大多数操作系统支持某种形式的经典虚拟化，将应用程序打包成包含其自身完整操作系统的镜像来运行。运行这些虚拟机，或称虚拟机，是一种成熟的方法，在数据中心环境中普遍存在。</p>
<p>这些技术大多保留给数据中心的大规模部署，尽管某些复杂的应用可以从这种包装中受益。技术是与 Python 无关的，包括：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.vagrantup.com/">Vagrant</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/VHD_(file_format)">VHD</a>, <a class="reference external" href="https://en.wikipedia.org/wiki/Amazon_Machine_Image">AMI</a>, and <a class="reference external" href="https://docs.openstack.org/glance/latest/user/formats.html" title="(在 glance v26.0.0.0b3.dev2)"><span class="xref std std-doc">other formats</span></a></p></li>
<li><p><a class="reference external" href="https://www.redhat.com/en/topics/openstack">OpenStack</a> - A cloud management system in Python, with extensive VM support</p></li>
</ul>
</section>
<section id="bringing-your-own-hardware">
<h3><a class="toc-backref" href="#id18">自带硬件</a><a class="headerlink" href="#bringing-your-own-hardware" title="永久链接至标题">¶</a></h3>
<p>运送你的软件的最全面的方法是把它已经安装在一些硬件上。这样一来，你的软件的用户就只需要用电了。</p>
<p>上述的虚拟机主要是为精通技术的人准备的，而你可以发现从最先进的数据中心到最年轻的孩子都在使用硬件设备。</p>
<p>将你的代码嵌入到 <a class="reference external" href="https://github.com/adafruit/circuitpython">Adafruit</a>、<a class="reference external" href="https://micropython.org/">MicroPython</a> 或更强大的运行 Python 的硬件上，然后将其运送到数据中心或你的用户家中。他们即插即用，你就可以收工了。</p>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="_images/py_pkg_applications.png"><img alt="A summary of technologies used to package Python applications." src="_images/py_pkg_applications.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">用于打包 Python 应用程序的简化技术范围。</span><a class="headerlink" href="#id3" title="永久链接至图片">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="what-about">
<h2><a class="toc-backref" href="#id19">那么 ……</a><a class="headerlink" href="#what-about" title="永久链接至标题">¶</a></h2>
<p>上面的章节只能总结这么多，你可能想知道一些比较明显的差距。</p>
<section id="operating-system-packages">
<h3><a class="toc-backref" href="#id20">操作系统包</a><a class="headerlink" href="#operating-system-packages" title="永久链接至标题">¶</a></h3>
<p>正如上面的 <a class="reference internal" href="#depending-on-a-separate-ecosystem"><span class="std std-ref">依赖于独立的软件分发生态系统</span></a> 中提到的，一些操作系统有自己的软件包管理器。如果你非常确定你的目标操作系统，你可以直接依赖像 <a class="reference external" href="https://en.wikipedia.org/wiki/Deb_(file_format)">deb</a> （用于 Debian，Ubuntu 等）或 <a class="reference external" href="https://en.wikipedia.org/wiki/RPM_Package_Manager">RPM</a> （用于 Red Hat，Fedora 等）的格式，并使用该内置软件包管理器来处理安装，甚至部署。你甚至可以使用 <a class="reference external" href="https://fpm.readthedocs.io/en/latest/cli-reference.html#virtualenv">FPM</a> 从同一来源生成 deb 和 RPM。</p>
<p>在大多数部署管道中，操作系统包管理器只是拼图中的一个部分。</p>
</section>
<section id="virtualenv">
<h3><a class="toc-backref" href="#id21">virtualenv</a><a class="headerlink" href="#virtualenv" title="永久链接至标题">¶</a></h3>
<p><a class="reference external" href="https://docs.python-guide.org/dev/virtualenvs/" title="(在 pythonguide v0.0.1)"><span class="xref std std-doc">Virtualenvs</span></a> 一直是多代 Python 开发者不可或缺的工具，但正在慢慢淡出人们的视线，因为它们正在被更高级别的工具所包裹。 特别是在打包方面，virtualenvs 在 <a class="reference external" href="https://dh-virtualenv.readthedocs.io/en/latest/tutorial.html" title="(在 dh_virtualenv v1.2)"><span class="xref std std-doc">the dh-virtualenv tool</span></a> 和 <a class="reference external" href="https://github.com/jamesabel/osnap">osnap</a> 中被作为一种基本工具，这两个工具都以一种独立的方式打包了 virtualenvs。</p>
<p>对于生产部署，不要依赖从互联网上运行 <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span></code>，进入一个 virtualenv，就像人们在开发环境中可能做的那样。上面的概述充满了更好的解决方案。</p>
</section>
<section id="security">
<h3><a class="toc-backref" href="#id22">安全性</a><a class="headerlink" href="#security" title="永久链接至标题">¶</a></h3>
<p>你越往下走，就越难更新你的软件包的组件。所有东西都被更紧密地结合在一起。</p>
<p>例如，如果出现了内核安全问题，而你正在部署容器，主机系统的内核可以被更新，而不需要代表应用程序进行新的构建。如果你部署了虚拟机图像，你就需要一个新的构建。这种动态是否使一个选项更安全，仍然是一个有点老的争论，可以追溯到至今仍未解决的 <a class="reference external" href="https://www.google.com/search?channel=fs&amp;q=static+vs+dynamic+linking">静态与动态链接</a> 的问题。</p>
</section>
</section>
<section id="wrap-up">
<h2><a class="toc-backref" href="#id23">总结一下吧</a><a class="headerlink" href="#wrap-up" title="永久链接至标题">¶</a></h2>
<p>Python中的包装有一点名声，那就是一波三折。这种印象主要是 Python 的多功能性的副产品。一旦你理解了每个打包方案之间的自然界限，你就会开始意识到，不同的景观是 Python 程序员为使用最平衡、最灵活的语言之一而付出的小代价。</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">目录</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python 包装的概述</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#thinking-about-deployment">关于部署的思考</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packaging-python-libraries-and-tools">包装 Python 库和工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packaging-python-applications">包装 Python 应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-about">那么 ……</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wrap-up">总结一下吧</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="flow.html">The Packaging Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="guides/index.html">指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="discussions/index.html">讨论</a></li>
<li class="toctree-l1"><a class="reference internal" href="specifications/index.html">PyPA specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_projects.html">项目摘要</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">术语表</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">如何获得支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">为本指南做出贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="news.html">新闻</a></li>
</ul>

  <div>
    <h4>上一个主题</h4>
    <p class="topless"><a href="index.html"
                          title="上一章">Python 包装用户指南</a></p>
  </div>
  <div>
    <h4>下一个主题</h4>
    <p class="topless"><a href="flow.html"
                          title="下一章">The Packaging Flow</a></p>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="flow.html" title="The Packaging Flow"
             >下一页</a> |</li>
        <li class="right" >
          <a href="index.html" title="Python 包装用户指南"
             >上一页</a> |</li>
          <li><img src="_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://pypa.io">PyPA</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
              <a href="index.html">Python Packaging User Guide</a> &#187;
              
          </li>
        <li class="nav-item nav-item-this"><a href="">Python 包装的概述</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="search.html" method="get">
          <input placeholder="快速搜索" aria-label="快速搜索" type="text" name="q" />
          <input type="submit" value="转向" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; 版权所有 2013–2020, PyPA.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    最后更新于 2023 年 01 月 31 日.
    <a href="https://github.com/pypa/packaging.python.org/issues">Found a bug</a>?
    <br />

    由 <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0创建。
    </div>

  </body>
</html>